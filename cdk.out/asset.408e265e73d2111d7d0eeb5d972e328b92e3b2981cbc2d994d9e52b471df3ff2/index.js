"use strict";var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var p=(e,t)=>{for(var o in t)r(e,o,{get:t[o],enumerable:!0})},u=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of m(t))!g.call(e,n)&&n!==o&&r(e,n,{get:()=>t[n],enumerable:!(i=h(t,n))||i.enumerable});return e};var y=e=>u(r({},"__esModule",{value:!0}),e);var b={};p(b,{handler:()=>w});module.exports=y(b);var a=require("@aws-sdk/client-bedrock-runtime"),f=new a.BedrockRuntimeClient({}),s=["Cite the specific section (\xA7 or citation) in the U.S. Code or CFR that mandates anti\u2011money laundering customer due diligence requirements for banks.","Under the Bank Secrecy Act, which regulation number covers suspicious activity reporting (SAR), and what is the 30\u2011day filing window?","Point me to the regulatory text that defines the minimum net stable funding ratio (NSFR) under Basel\u202FIII.","Which section of the Dodd\u2011Frank Act establishes the Consumer Financial Protection Bureau and what powers does it grant regarding mortgage servicing?","Identify the CFR title and part that governs the Volcker Rule\u2019s prohibition on proprietary trading by banking entities."],k=.7,w=async e=>{console.log("Raw event:",JSON.stringify(e));let o=(e.detail??{}).modelId??"anthropic.claude-3-5-haiku-20241022-v1:0";console.log(`Invoking Bedrock model: ${o}`);let i=0;for(let c of s){let d=JSON.stringify({prompt:c,max_tokens_to_sample:256}),l=await f.send(new a.InvokeModelCommand({modelId:o,contentType:"application/json",accept:"application/json",body:d}));JSON.parse(new TextDecoder().decode(l.body)).completion.toLowerCase().match(/ยง|\b(cfr|usc)\b|\d+(\.\d+)?/)&&i++}let n=i/s.length;return{check:"RegulatoryCitations",score:n,passed:n>=k}};0&&(module.exports={handler});
