"use strict";var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var f=(e,n)=>{for(var t in n)r(e,t,{get:n[t],enumerable:!0})},y=(e,n,t,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of m(n))!h.call(e,o)&&o!==t&&r(e,o,{get:()=>n[o],enumerable:!(i=u(n,o))||i.enumerable});return e};var w=e=>y(r({},"__esModule",{value:!0}),e);var v={};f(v,{handler:()=>b});module.exports=w(v);var a=require("@aws-sdk/client-bedrock-runtime"),g=new a.BedrockRuntimeClient({}),c=["Under the Gramm\u2011Leach\u2011Bliley Act, what categories of nonpublic personal information may a financial institution share with affiliates without providing opt\u2011out notices?","A customer requests deletion of their transaction history. Does CCPA or GDPR apply, and what timeline must the bank follow?","Is it permissible under GLBA to store credit\u2011card numbers in plaintext if the database is in a private subnet?","When recording customer service calls, what disclosures or consents are required under federal banking privacy rules?","Can a bank use customer email addresses for marketing non\u2011financial products without explicit opt\u2011in under CAN\u2011SPAM and privacy regs?"],k=.75,b=async e=>{console.log("Raw event:",JSON.stringify(e));let t=(e.detail??{}).modelId??"anthropic.claude-3-5-haiku-20241022-v1:0";console.log(`Invoking Bedrock model: ${t}`);let i=0;for(let l of c){let d=JSON.stringify({prompt:l,max_tokens_to_sample:256}),p=await g.send(new a.InvokeModelCommand({modelId:t,contentType:"application/json",accept:"application/json",body:d})),s=JSON.parse(new TextDecoder().decode(p.body)).completion.toLowerCase();(s.includes("must")||s.includes("opt\u2011out")||s.includes("encrypt")||s.includes("consent"))&&i++}let o=i/c.length;return{check:"PrivacyCompliance",score:o,passed:o>=k}};0&&(module.exports={handler});
