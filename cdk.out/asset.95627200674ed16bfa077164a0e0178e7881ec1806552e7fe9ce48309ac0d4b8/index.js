"use strict";var d=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var c=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},w=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of p(t))!u.call(e,n)&&n!==r&&d(e,n,{get:()=>t[n],enumerable:!(s=l(t,n))||s.enumerable});return e};var S=e=>w(d({},"__esModule",{value:!0}),e);var B={};c(B,{handler:()=>g});module.exports=S(B);var a=require("@aws-sdk/client-dynamodb"),o=require("@aws-sdk/client-eventbridge"),i=require("@aws-sdk/client-ssm"),v=new a.DynamoDBClient({}),y=new o.EventBridgeClient({}),E=new i.SSMClient({}),{TABLE_NAME:N,EVENT_BUS_ARN:f}=process.env,g=async e=>{let{runId:t,datasetKeys:r}=e,s=e.Input??[],n=s.every(m=>m.passed);return await v.send(new a.PutItemCommand({TableName:N,Item:{runId:{S:t},ts:{N:Date.now().toString()},approved:{BOOL:n},results:{S:JSON.stringify(s)}}})),n&&(await y.send(new o.PutEventsCommand({Entries:[{EventBusName:f,Source:"llmops.evaluator",DetailType:"ModelApproved",Detail:JSON.stringify(e.detail??{})}]})),await E.send(new i.PutParameterCommand({Name:"/modelops/approved/current",Type:"String",Overwrite:!0,Value:JSON.stringify(e.detail??{})}))),{approved:n}};0&&(module.exports={handler});
